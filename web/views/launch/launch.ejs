<%- include('../partials/header.ejs') %>
    <%- include('../partials/navbar.ejs') %>
        <!--  BEGIN MAIN CONTAINER  -->
        <div class="main-container" id="container">
            <div class="overlay"></div>
            <div class="search-overlay"></div>
            <%- include('../partials/menu.ejs') %>
                <!--  BEGIN CONTENT AREA  -->
                <div id="content" class="main-content">
                    <div class="layout-px-spacing">
                        <!-- CONTENT AREA -->

                        <div class="row layout-top-spacing">

                            <div class="col-md-6">
                                <%- include('../partials/messege.ejs') %>
                            </div>

                            <div class="col-xl-12 col-lg-12 col-md-12 col-12 layout-spacing">
                                <div class="widget widget-content-area br-4">
                                    <div class="widget-one"><br>
                                        <div class="card-body">
                                            <div class="card-body">
                                                <div class="form-group row">
                                                    <div class="col-sm-10">
                                                        <h5>Cadastro de novo usuario</h5>
                                                    </div>
                                                    <div class="col-sm-2">
                                                        <a href="/" type="submit"
                                                            class="btn waves-effect waves-light btn-primary btn-square">Lançamentos</a>
                                                    </div>
                                                </div>
                                            </div>

                                            <form action="/launch/create" method="post">
                                                <div class="row mb-4">
                                                    <div class="col">
                                                        <label for="">Descrição</label>
                                                        <input type="text" class="form-control" name="description"
                                                            required placeholder="Descrição">
                                                    </div>
                                                    <div class="col">
                                                        <label for="">Tipo</label>
                                                        <select class="form-control" name="type" id="type" required>
                                                            <option disabled selected>Selecione um tipo</option>
                                                            <option value="DESPESA">Despesa</option>
                                                            <option value="RECEITA">Receita</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row mb-4">
                                                    <div class="col" id="revenue" style="display: none;">
                                                        <label for="">Receita</label>
                                                        <select class="form-control" name="revenue_id" required>
                                                            <option disabled selected>Selecione um tipo</option>
                                                            <% revenue.forEach(element=> { %>
                                                                <option value="<%= element.id %>">
                                                                    <%= element.name %>
                                                                </option>
                                                                <% }) %>
                                                        </select>
                                                    </div>
                                                    <div class="col" id="expense">
                                                        <label for="">Despesa</label>
                                                        <select class="form-control" name="expense_id" required>
                                                            <option disabled selected>Selecione um tipo</option>
                                                            <% expense.forEach(element=> { %>
                                                                <option value="<%= element.id %>">
                                                                    <%= element.name %>
                                                                </option>
                                                                <% }) %>
                                                        </select>
                                                    </div>
                                                    <div class="col">
                                                        <label for="">Conta bancaria</label>
                                                        <select class="form-control" name="bank_id" required>
                                                            <option disabled selected>Selecione uma conta bancaria
                                                            </option>
                                                            <% bank.forEach(element=> { %>
                                                                <option value="<%= element.id %> ">
                                                                    <%= element.bank%>
                                                                </option>
                                                                <% }) %>

                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row mb-4">
                                                    <div class="col">
                                                        <label for="">Valor</label>
                                                        <input type="text" class="form-control" name="balance" id="balance" required
                                                            placeholder="Valor">
                                                    </div>
                                                    <div class="col">

                                                    </div>
                                                </div>
                                                <button type="submit" name="time"
                                                    class="btn btn-primary">Salvar</button>
                                            </form>
                                        </div>
                                        <br>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <script>
                        $('#type').on('change', function (e) {
                            var type = $(this).val();
                            if (type == 'RECEITA') {
                                document.getElementById('revenue').style.display = 'block';
                                document.getElementById('expense').style.display = 'none';
                            } if (type == 'DESPESA') {
                                document.getElementById('revenue').style.display = 'none';
                                document.getElementById('expense').style.display = 'block';
                            }
                        });
                    </script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-maskmoney/3.0.2/jquery.maskMoney.min.js"></script>
                    <script>
                      $(function() {
                      $('#balance').maskMoney({ decimal: '.', thousands: '', precision: 2 });
                    })
                    </script>
                    <%- include('../partials/footer.ejs') %>